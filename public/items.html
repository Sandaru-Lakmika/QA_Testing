<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Items</title>
  <style>
    body{font-family:system-ui;margin:40px;max-width:480px}
    label{display:block;margin-top:12px}
    button{margin-top:16px}
    ul{margin-top:16px}
  </style>
</head>
<body>
  <h1>Items</h1>
  <label>Item name <input id="itemName" /></label>
  <button id="addBtn">Add</button>
  <ul id="list"></ul>

  <script>
    async function refresh(){
      const res = await fetch('/api/items');
      const items = await res.json();
      const ul = document.getElementById('list');
      ul.innerHTML = '';
      items.forEach(i=>{
        const li = document.createElement('li');
        li.textContent = i.name;
        ul.appendChild(li);
      });
    }
    document.getElementById('addBtn').onclick = async () => {
      const name = document.getElementById('itemName').value.trim();
      const res = await fetch('/api/items', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({name})
      });
      if(res.ok){ document.getElementById('itemName').value=''; refresh(); }
      else { alert('Add failed'); }
    };
    refresh();
  </script>
</body>
</html>
